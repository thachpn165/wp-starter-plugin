{"version":3,"file":"admin.js","sources":["../src/js/admin.js"],"sourcesContent":["/**\n * Admin JavaScript for My Plugin\n */\n\nimport '../scss/admin.scss';\n\n(function ($) {\n  'use strict';\n\n  const MyPluginAdmin = {\n    /**\n     * Initialize the admin module.\n     */\n    init() {\n      this.cacheElements();\n      this.bindEvents();\n      // Hide save button on Dashboard tab (default).\n      $('.my-plugin-form-actions').hide();\n    },\n\n    /**\n     * Cache DOM elements.\n     */\n    cacheElements() {\n      this.$tabs = $('.my-plugin-tabs li');\n      this.$tabContents = $('.my-plugin-tab-content');\n      this.$form = $('#my-plugin-settings-form');\n      this.$saveBtn = $('.my-plugin-save-btn');\n      this.$toast = $('#my-plugin-toast');\n    },\n\n    /**\n     * Bind event handlers.\n     */\n    bindEvents() {\n      this.$tabs.on('click', this.handleTabClick.bind(this));\n      this.$form.on('submit', this.handleFormSubmit.bind(this));\n      $(document).on('click', '.my-plugin-accordion-header', this.handleAccordionClick);\n    },\n\n    /**\n     * Handle tab click.\n     *\n     * @param {Event} e Click event.\n     */\n    handleTabClick(e) {\n      const $tab = $(e.currentTarget);\n      const tabId = $tab.data('tab');\n\n      // Update active tab.\n      this.$tabs.removeClass('active');\n      $tab.addClass('active');\n\n      // Show corresponding content.\n      this.$tabContents.removeClass('active');\n      $('#tab-' + tabId).addClass('active');\n\n      // Hide save button on Dashboard tab.\n      $('.my-plugin-form-actions').toggle(tabId !== 'dashboard');\n    },\n\n    /**\n     * Handle accordion header click.\n     *\n     * @param {Event} e Click event.\n     */\n    handleAccordionClick(e) {\n      const $header = $(e.currentTarget);\n      const $content = $header.next('.my-plugin-accordion-content');\n\n      $header.toggleClass('active');\n      $content.toggleClass('active');\n    },\n\n    /**\n     * Handle form submit (AJAX save).\n     *\n     * @param {Event} e Submit event.\n     */\n    handleFormSubmit(e) {\n      e.preventDefault();\n\n      if (this.$saveBtn.hasClass('is-loading')) {\n        return;\n      }\n\n      this.setLoading(true);\n\n      const formData = this.$form.serialize();\n\n      $.ajax({\n        url: myPluginAdmin.ajaxUrl,\n        type: 'POST',\n        data: formData + '&action=my_plugin_save_settings',\n        success: this.handleSaveSuccess.bind(this),\n        error: this.handleSaveError.bind(this),\n        complete: () => this.setLoading(false),\n      });\n    },\n\n    /**\n     * Handle successful save.\n     *\n     * @param {Object} response AJAX response.\n     */\n    handleSaveSuccess(response) {\n      if (response.success) {\n        this.showToast(response.data.message, 'success');\n      } else {\n        this.showToast(response.data.message || myPluginAdmin.strings.error, 'error');\n      }\n    },\n\n    /**\n     * Handle save error.\n     */\n    handleSaveError() {\n      this.showToast(myPluginAdmin.strings.error, 'error');\n    },\n\n    /**\n     * Set loading state.\n     *\n     * @param {boolean} isLoading Loading state.\n     */\n    setLoading(isLoading) {\n      this.$saveBtn.toggleClass('is-loading', isLoading);\n    },\n\n    /**\n     * Show toast notification.\n     *\n     * @param {string} message Toast message.\n     * @param {string} type    Toast type (success|error).\n     */\n    showToast(message, type = 'success') {\n      const icon = type === 'success' ? 'yes-alt' : 'warning';\n      const $toast = $('<div>', { class: `my-plugin-toast-item ${type}` }).append(\n        $('<span>', { class: `dashicons dashicons-${icon}` }),\n        $('<span>').text(message) // Use .text() to prevent XSS\n      );\n\n      this.$toast.append($toast);\n\n      // Auto-remove after 3 seconds.\n      setTimeout(() => {\n        $toast.addClass('fade-out');\n        setTimeout(() => $toast.remove(), 300);\n      }, 3000);\n    },\n  };\n\n  // Initialize when DOM ready.\n  $(document).ready(() => {\n    MyPluginAdmin.init();\n  });\n})(jQuery);\n"],"names":["$","MyPluginAdmin","e","$tab","tabId","$header","$content","formData","response","isLoading","message","type","icon","$toast"],"mappings":"CAMC,SAAUA,EAAG,CAGZ,MAAMC,EAAgB,CAIpB,MAAO,CACL,KAAK,cAAa,EAClB,KAAK,WAAU,EAEfD,EAAE,yBAAyB,EAAE,KAAI,CACnC,EAKA,eAAgB,CACd,KAAK,MAAQA,EAAE,oBAAoB,EACnC,KAAK,aAAeA,EAAE,wBAAwB,EAC9C,KAAK,MAAQA,EAAE,0BAA0B,EACzC,KAAK,SAAWA,EAAE,qBAAqB,EACvC,KAAK,OAASA,EAAE,kBAAkB,CACpC,EAKA,YAAa,CACX,KAAK,MAAM,GAAG,QAAS,KAAK,eAAe,KAAK,IAAI,CAAC,EACrD,KAAK,MAAM,GAAG,SAAU,KAAK,iBAAiB,KAAK,IAAI,CAAC,EACxDA,EAAE,QAAQ,EAAE,GAAG,QAAS,8BAA+B,KAAK,oBAAoB,CAClF,EAOA,eAAeE,EAAG,CAChB,MAAMC,EAAOH,EAAEE,EAAE,aAAa,EACxBE,EAAQD,EAAK,KAAK,KAAK,EAG7B,KAAK,MAAM,YAAY,QAAQ,EAC/BA,EAAK,SAAS,QAAQ,EAGtB,KAAK,aAAa,YAAY,QAAQ,EACtCH,EAAE,QAAUI,CAAK,EAAE,SAAS,QAAQ,EAGpCJ,EAAE,yBAAyB,EAAE,OAAOI,IAAU,WAAW,CAC3D,EAOA,qBAAqBF,EAAG,CACtB,MAAMG,EAAUL,EAAEE,EAAE,aAAa,EAC3BI,EAAWD,EAAQ,KAAK,8BAA8B,EAE5DA,EAAQ,YAAY,QAAQ,EAC5BC,EAAS,YAAY,QAAQ,CAC/B,EAOA,iBAAiBJ,EAAG,CAGlB,GAFAA,EAAE,eAAc,EAEZ,KAAK,SAAS,SAAS,YAAY,EACrC,OAGF,KAAK,WAAW,EAAI,EAEpB,MAAMK,EAAW,KAAK,MAAM,UAAS,EAErCP,EAAE,KAAK,CACL,IAAK,cAAc,QACnB,KAAM,OACN,KAAMO,EAAW,kCACjB,QAAS,KAAK,kBAAkB,KAAK,IAAI,EACzC,MAAO,KAAK,gBAAgB,KAAK,IAAI,EACrC,SAAU,IAAM,KAAK,WAAW,EAAK,CAC7C,CAAO,CACH,EAOA,kBAAkBC,EAAU,CACtBA,EAAS,QACX,KAAK,UAAUA,EAAS,KAAK,QAAS,SAAS,EAE/C,KAAK,UAAUA,EAAS,KAAK,SAAW,cAAc,QAAQ,MAAO,OAAO,CAEhF,EAKA,iBAAkB,CAChB,KAAK,UAAU,cAAc,QAAQ,MAAO,OAAO,CACrD,EAOA,WAAWC,EAAW,CACpB,KAAK,SAAS,YAAY,aAAcA,CAAS,CACnD,EAQA,UAAUC,EAASC,EAAO,UAAW,CACnC,MAAMC,EAAOD,IAAS,UAAY,UAAY,UACxCE,EAASb,EAAE,QAAS,CAAE,MAAO,wBAAwBW,CAAI,EAAE,CAAE,EAAE,OACnEX,EAAE,SAAU,CAAE,MAAO,uBAAuBY,CAAI,GAAI,EACpDZ,EAAE,QAAQ,EAAE,KAAKU,CAAO,CAChC,EAEM,KAAK,OAAO,OAAOG,CAAM,EAGzB,WAAW,IAAM,CACfA,EAAO,SAAS,UAAU,EAC1B,WAAW,IAAMA,EAAO,OAAM,EAAI,GAAG,CACvC,EAAG,GAAI,CACT,CACJ,EAGEb,EAAE,QAAQ,EAAE,MAAM,IAAM,CACtBC,EAAc,KAAI,CACpB,CAAC,CACH,GAAG,MAAM"}