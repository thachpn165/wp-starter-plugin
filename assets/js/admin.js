(function(s){const n={init(){this.cacheElements(),this.bindEvents(),s(".my-plugin-form-actions").hide()},cacheElements(){this.$tabs=s(".my-plugin-tabs li"),this.$tabContents=s(".my-plugin-tab-content"),this.$form=s("#my-plugin-settings-form"),this.$saveBtn=s(".my-plugin-save-btn"),this.$toast=s("#my-plugin-toast")},bindEvents(){this.$tabs.on("click",this.handleTabClick.bind(this)),this.$form.on("submit",this.handleFormSubmit.bind(this)),s(document).on("click",".my-plugin-accordion-header",this.handleAccordionClick)},handleTabClick(t){const a=s(t.currentTarget),i=a.data("tab");this.$tabs.removeClass("active"),a.addClass("active"),this.$tabContents.removeClass("active"),s("#tab-"+i).addClass("active"),s(".my-plugin-form-actions").toggle(i!=="dashboard")},handleAccordionClick(t){const a=s(t.currentTarget),i=a.next(".my-plugin-accordion-content");a.toggleClass("active"),i.toggleClass("active")},handleFormSubmit(t){if(t.preventDefault(),this.$saveBtn.hasClass("is-loading"))return;this.setLoading(!0);const a=this.$form.serialize();s.ajax({url:myPluginAdmin.ajaxUrl,type:"POST",data:a+"&action=my_plugin_save_settings",success:this.handleSaveSuccess.bind(this),error:this.handleSaveError.bind(this),complete:()=>this.setLoading(!1)})},handleSaveSuccess(t){t.success?this.showToast(t.data.message,"success"):this.showToast(t.data.message||myPluginAdmin.strings.error,"error")},handleSaveError(){this.showToast(myPluginAdmin.strings.error,"error")},setLoading(t){this.$saveBtn.toggleClass("is-loading",t)},showToast(t,a="success"){const i=a==="success"?"yes-alt":"warning",e=s("<div>",{class:`my-plugin-toast-item ${a}`}).append(s("<span>",{class:`dashicons dashicons-${i}`}),s("<span>").text(t));this.$toast.append(e),setTimeout(()=>{e.addClass("fade-out"),setTimeout(()=>e.remove(),300)},3e3)}};s(document).ready(()=>{n.init()})})(jQuery);
//# sourceMappingURL=admin.js.map
